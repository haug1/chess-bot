(function(){"use strict";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add("5");let Je=!1,ir=!1;function or(){Je=!0}or();const lr=1,fr=2,ar=16,ur=2,cr=4,dr=8,hr=1,vr=2,k=Symbol(),_r="http://www.w3.org/1999/xhtml",gt=!1;var Jt=Array.isArray,pr=Array.prototype.indexOf,Se=Array.prototype.includes,ot=Array.from,Zt=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,Qt=Object.getOwnPropertyDescriptors,gr=Object.prototype,yr=Array.prototype,yt=Object.getPrototypeOf,Xt=Object.isExtensible;const Me=()=>{};function br(e){return e()}function bt(e){for(var t=0;t<e.length;t++)e[t]()}function en(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const N=2,mt=4,Ze=8,tn=1<<24,X=16,G=32,pe=64,wt=128,j=512,C=1024,I=2048,J=4096,D=8192,ee=16384,Et=32768,Ce=65536,nn=1<<17,rn=1<<18,Oe=1<<19,sn=1<<20,oe=1<<25,ge=32768,xt=1<<21,St=1<<22,le=1<<23,Ae=Symbol("$state"),mr=Symbol("legacy props"),wr=Symbol(""),ke=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Er(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Sr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Tr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Mr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Cr(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Or(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ar(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function kr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Nr(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function $r(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function on(e){return e===this.v}function ln(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fn(e){return!ln(e,this.v)}let T=null;function Ne(e){T=e}function Qe(e,t=!1,n){T={p:T,i:!1,c:null,e:null,s:e,x:null,l:Je&&!t?{s:null,u:null,$:[]}:null}}function Xe(e){var t=T,n=t.e;if(n!==null){t.e=null;for(var r of n)Cn(r)}return t.i=!0,T=t.p,{}}function et(){return!Je||T!==null&&T.l===null}let $e=[];function Fr(){var e=$e;$e=[],bt(e)}function ye(e){if($e.length===0){var t=$e;queueMicrotask(()=>{t===$e&&Fr()})}$e.push(e)}function an(e){var t=w;if(t===null)return m.f|=le,e;if((t.f&Et)===0){if((t.f&wt)===0)throw e;t.b.error(e)}else Fe(e,t)}function Fe(e,t){for(;t!==null;){if((t.f&wt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Ir=-7169;function M(e,t){e.f=e.f&Ir|t}function Tt(e){(e.f&j)!==0||e.deps===null?M(e,C):M(e,J)}function un(e){if(e!==null)for(const t of e)(t.f&N)===0||(t.f&ge)===0||(t.f^=ge,un(t.deps))}function cn(e,t,n){(e.f&I)!==0?t.add(e):(e.f&J)!==0&&n.add(e),un(e.deps),M(e,C)}const lt=new Set;let x=null,V=null,W=[],Mt=null,Ct=!1;class fe{committed=!1;current=new Map;previous=new Map;#t=new Set;#o=new Set;#e=0;#s=0;#i=null;#r=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;#l=!1;is_deferred(){return this.is_fork||this.#s>0}process(t){W=[],this.apply();var n=[],r=[];for(const s of t)this.#f(s,n,r);if(this.is_deferred()){this.#a(r),this.#a(n);for(const s of this.skipped_effects)_n(s)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#u(),x=null,dn(r),dn(n),this.#i?.resolve()}V=null}#f(t,n,r){t.f^=C;for(var s=t.first,i=null;s!==null;){var l=s.f,o=(l&(G|pe))!==0,f=o&&(l&C)!==0,a=f||(l&D)!==0||this.skipped_effects.has(s);if(!a&&s.fn!==null){o?s.f^=C:i!==null&&(l&(mt|Ze|tn))!==0?i.b.defer_effect(s):(l&mt)!==0?n.push(s):Le(s)&&((l&X)!==0&&this.#n.add(s),je(s));var c=s.first;if(c!==null){s=c;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===i&&(i=null),s=d.next,d=d.parent}}#a(t){for(var n=0;n<t.length;n+=1)cn(t[n],this.#r,this.#n)}capture(t,n){n!==k&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&le)===0&&(this.current.set(t,t.v),V?.set(t,t.v))}activate(){x=this,this.apply()}deactivate(){x===this&&(x=null,V=null)}flush(){if(this.activate(),W.length>0){if(Pr(),x!==null&&x!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#o)t(this);this.#o.clear()}#u(){if(lt.size>1){this.previous.clear();var t=V,n=!0;for(const s of lt){if(s===this){n=!1;continue}const i=[];for(const[o,f]of this.current){if(s.current.has(o))if(n&&f!==s.current.get(o))s.current.set(o,f);else continue;i.push(o)}if(i.length===0)continue;const l=[...s.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var r=W;W=[];const o=new Set,f=new Map;for(const a of i)hn(a,l,o,f);if(W.length>0){x=s,s.apply();for(const a of W)s.#f(a,[],[]);s.deactivate()}W=r}}x=null,V=t}this.committed=!0,lt.delete(this)}increment(t){this.#e+=1,t&&(this.#s+=1)}decrement(t){this.#e-=1,t&&(this.#s-=1),!this.#l&&(this.#l=!0,ye(()=>{this.#l=!1,this.is_deferred()?W.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#r)this.#n.delete(t),M(t,I),ne(t);for(const t of this.#n)M(t,J),ne(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#o.add(t)}settled(){return(this.#i??=en()).promise}static ensure(){if(x===null){const t=x=new fe;lt.add(x),ye(()=>{x===t&&t.flush()})}return x}apply(){}}function Pr(){Ct=!0;var e=null;try{for(var t=0;W.length>0;){var n=fe.ensure();if(t++>1e3){var r,s;Rr()}n.process(W),ae.clear()}}finally{Ct=!1,Mt=null}}function Rr(){try{Mr()}catch(e){Fe(e,Mt)}}let te=null;function dn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(ee|D))===0&&Le(r)&&(te=new Set,je(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?kn(r):r.fn=null),te?.size>0)){ae.clear();for(const s of te){if((s.f&(ee|D))!==0)continue;const i=[s];let l=s.parent;for(;l!==null;)te.has(l)&&(te.delete(l),i.push(l)),l=l.parent;for(let o=i.length-1;o>=0;o--){const f=i[o];(f.f&(ee|D))===0&&je(f)}}te.clear()}}te=null}}function hn(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&N)!==0?hn(s,t,n,r):(i&(St|X))!==0&&(i&I)===0&&vn(s,t,r)&&(M(s,I),ne(s))}}function vn(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(Se.call(t,s))return!0;if((s.f&N)!==0&&vn(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function ne(e){for(var t=Mt=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ct&&t===w&&(n&X)!==0&&(n&rn)===0)return;if((n&(pe|G))!==0){if((n&C)===0)return;t.f^=C}}W.push(t)}function _n(e){if(!((e.f&G)!==0&&(e.f&C)!==0)){M(e,C);for(var t=e.first;t!==null;)_n(t),t=t.next}}function qr(e){let t=0,n=be(0),r;return()=>{It()&&(_(n),qt(()=>(t===0&&(r=A(()=>e(()=>tt(n)))),t+=1,()=>{ye(()=>{t-=1,t===0&&(r?.(),r=void 0,tt(n))})})))}}var Dr=Ce|Oe|wt;function Lr(e,t,n){new jr(e,t,n)}class jr{parent;is_pending=!1;#t;#o=null;#e;#s;#i;#r=null;#n=null;#l=null;#f=null;#a=null;#u=0;#d=0;#v=!1;#h=!1;#_=new Set;#p=new Set;#c=null;#w=qr(()=>(this.#c=be(this.#u),()=>{this.#c=null}));constructor(t,n,r){this.#t=t,this.#e=n,this.#s=r,this.parent=w.b,this.is_pending=!!this.#e.pending,this.#i=Lt(()=>{w.b=this;{var s=this.#b();try{this.#r=B(()=>r(s))}catch(i){this.error(i)}this.#d>0?this.#y():this.is_pending=!1}return()=>{this.#a?.remove()}},Dr)}#E(){try{this.#r=B(()=>this.#s(this.#t))}catch(t){this.error(t)}}#x(){const t=this.#e.pending;t&&(this.#n=B(()=>t(this.#t)),ye(()=>{var n=this.#b();this.#r=this.#g(()=>(fe.ensure(),B(()=>this.#s(n)))),this.#d>0?this.#y():(we(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#b(){var t=this.#t;return this.is_pending&&(this.#a=Re(),this.#t.before(this.#a),t=this.#a),t}defer_effect(t){cn(t,this.#_,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var n=w,r=m,s=T;Z(this.#i),H(this.#i),Ne(this.#i.ctx);try{return t()}catch(i){return an(i),null}finally{Z(n),H(r),Ne(s)}}#y(){const t=this.#e.pending;this.#r!==null&&(this.#f=document.createDocumentFragment(),this.#f.append(this.#a),Fn(this.#r,this.#f)),this.#n===null&&(this.#n=B(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}if(this.#d+=t,this.#d===0){this.is_pending=!1;for(const n of this.#_)M(n,I),ne(n);for(const n of this.#p)M(n,J),ne(n);this.#_.clear(),this.#p.clear(),this.#n&&we(this.#n,()=>{this.#n=null}),this.#f&&(this.#t.before(this.#f),this.#f=null)}}update_pending_count(t){this.#m(t),this.#u+=t,!(!this.#c||this.#v)&&(this.#v=!0,ye(()=>{this.#v=!1,this.#c&&Ie(this.#c,this.#u)}))}get_effect_pending(){return this.#w(),_(this.#c)}error(t){var n=this.#e.onerror;let r=this.#e.failed;if(this.#h||!n&&!r)throw t;this.#r&&(P(this.#r),this.#r=null),this.#n&&(P(this.#n),this.#n=null),this.#l&&(P(this.#l),this.#l=null);var s=!1,i=!1;const l=()=>{if(s){$r();return}s=!0,i&&Nr(),fe.ensure(),this.#u=0,this.#l!==null&&we(this.#l,()=>{this.#l=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#h=!1,B(()=>this.#s(this.#t)))),this.#d>0?this.#y():this.is_pending=!1};ye(()=>{try{i=!0,n?.(t,l),i=!1}catch(o){Fe(o,this.#i&&this.#i.parent)}r&&(this.#l=this.#g(()=>{fe.ensure(),this.#h=!0;try{return B(()=>{r(this.#t,()=>t,()=>l)})}catch(o){return Fe(o,this.#i.parent),null}finally{this.#h=!1}}))})}}function Br(e,t,n,r){const s=et()?At:Y;var i=e.filter(h=>!h.settled);if(n.length===0&&i.length===0){r(t.map(s));return}var l=x,o=w,f=Hr(),a=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(h=>h.promise)):null;function c(h){f();try{r(h)}catch(v){(o.f&ee)===0&&Fe(v,o)}l?.deactivate(),Ot()}if(n.length===0){a.then(()=>c(t.map(s)));return}function d(){f(),Promise.all(n.map(h=>Ur(h))).then(h=>c([...t.map(s),...h])).catch(h=>Fe(h,o))}a?a.then(d):d()}function Hr(){var e=w,t=m,n=T,r=x;return function(i=!0){Z(e),H(t),Ne(n),i&&r?.activate()}}function Ot(){Z(null),H(null),Ne(null)}function At(e){var t=N|I,n=m!==null&&(m.f&N)!==0?m:null;return w!==null&&(w.f|=Oe),{ctx:T,deps:null,effects:null,equals:on,f:t,fn:e,reactions:null,rv:0,v:k,wv:0,parent:n??w,ac:null}}function Ur(e,t,n){let r=w;r===null&&Er();var s=r.b,i=void 0,l=be(k),o=!m,f=new Map;return Zr(()=>{var a=en();i=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{c===x&&c.committed&&c.deactivate(),Ot()})}catch(v){a.reject(v),Ot()}var c=x;if(o){var d=s.is_rendered();s.update_pending_count(1),c.increment(d),f.get(c)?.reject(ke),f.delete(c),f.set(c,a)}const h=(v,u=void 0)=>{if(c.activate(),u)u!==ke&&(l.f|=le,Ie(l,u));else{(l.f&le)!==0&&(l.f^=le),Ie(l,v);for(const[p,y]of f){if(f.delete(p),p===c)break;y.reject(ke)}}o&&(s.update_pending_count(-1),c.decrement(d))};a.promise.then(h,v=>h(null,v||"unknown"))}),Pt(()=>{for(const a of f.values())a.reject(ke)}),new Promise(a=>{function c(d){function h(){d===i?a(l):c(i)}d.then(h,h)}c(i)})}function Y(e){const t=At(e);return t.equals=fn,t}function pn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)P(t[n])}}function zr(e){for(var t=e.parent;t!==null;){if((t.f&N)===0)return(t.f&ee)===0?t:null;t=t.parent}return null}function kt(e){var t,n=w;Z(zr(e));try{e.f&=~ge,pn(e),t=Ln(e)}finally{Z(n)}return t}function gn(e){var t=kt(e);if(!e.equals(t)&&(e.wv=qn(),(!x?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){M(e,C);return}de||(V!==null?(It()||x?.is_fork)&&V.set(e,t):Tt(e))}let Nt=new Set;const ae=new Map;let yn=!1;function be(e,t){var n={f:0,v:e,reactions:null,equals:on,rv:0,wv:0};return n}function ue(e,t){const n=be(e);return es(n),n}function re(e,t=!1,n=!0){const r=be(e);return t||(r.equals=fn),Je&&n&&T!==null&&T.l!==null&&(T.l.s??=[]).push(r),r}function F(e,t,n=!1){m!==null&&(!K||(m.f&nn)!==0)&&et()&&(m.f&(N|X|St|nn))!==0&&(U===null||!Se.call(U,e))&&kr();let r=n?Pe(t):t;return Ie(e,r)}function Ie(e,t){if(!e.equals(t)){var n=e.v;de?ae.set(e,t):ae.set(e,n),e.v=t;var r=fe.ensure();if(r.capture(e,n),(e.f&N)!==0){const s=e;(e.f&I)!==0&&kt(s),Tt(s)}e.wv=qn(),bn(e,I),et()&&w!==null&&(w.f&C)!==0&&(w.f&(G|pe))===0&&(z===null?ts([e]):z.push(e)),!r.is_fork&&Nt.size>0&&!yn&&Gr()}return t}function Gr(){yn=!1;for(const e of Nt)(e.f&C)!==0&&M(e,J),Le(e)&&je(e);Nt.clear()}function tt(e){F(e,e.v+1)}function bn(e,t){var n=e.reactions;if(n!==null)for(var r=et(),s=n.length,i=0;i<s;i++){var l=n[i],o=l.f;if(!(!r&&l===w)){var f=(o&I)===0;if(f&&M(l,t),(o&N)!==0){var a=l;V?.delete(a),(o&ge)===0&&(o&j&&(l.f|=ge),bn(a,J))}else f&&((o&X)!==0&&te!==null&&te.add(l),ne(l))}}}function Pe(e){if(typeof e!="object"||e===null||Ae in e)return e;const t=yt(e);if(t!==gr&&t!==yr)return e;var n=new Map,r=Jt(e),s=ue(0),i=xe,l=o=>{if(xe===i)return o();var f=m,a=xe;H(null),Rn(i);var c=o();return H(f),Rn(a),c};return r&&n.set("length",ue(e.length)),new Proxy(e,{defineProperty(o,f,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&Or();var c=n.get(f);return c===void 0?c=l(()=>{var d=ue(a.value);return n.set(f,d),d}):F(c,a.value,!0),!0},deleteProperty(o,f){var a=n.get(f);if(a===void 0){if(f in o){const c=l(()=>ue(k));n.set(f,c),tt(s)}}else F(a,k),tt(s);return!0},get(o,f,a){if(f===Ae)return e;var c=n.get(f),d=f in o;if(c===void 0&&(!d||Te(o,f)?.writable)&&(c=l(()=>{var v=Pe(d?o[f]:k),u=ue(v);return u}),n.set(f,c)),c!==void 0){var h=_(c);return h===k?void 0:h}return Reflect.get(o,f,a)},getOwnPropertyDescriptor(o,f){var a=Reflect.getOwnPropertyDescriptor(o,f);if(a&&"value"in a){var c=n.get(f);c&&(a.value=_(c))}else if(a===void 0){var d=n.get(f),h=d?.v;if(d!==void 0&&h!==k)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return a},has(o,f){if(f===Ae)return!0;var a=n.get(f),c=a!==void 0&&a.v!==k||Reflect.has(o,f);if(a!==void 0||w!==null&&(!c||Te(o,f)?.writable)){a===void 0&&(a=l(()=>{var h=c?Pe(o[f]):k,v=ue(h);return v}),n.set(f,a));var d=_(a);if(d===k)return!1}return c},set(o,f,a,c){var d=n.get(f),h=f in o;if(r&&f==="length")for(var v=a;v<d.v;v+=1){var u=n.get(v+"");u!==void 0?F(u,k):v in o&&(u=l(()=>ue(k)),n.set(v+"",u))}if(d===void 0)(!h||Te(o,f)?.writable)&&(d=l(()=>ue(void 0)),F(d,Pe(a)),n.set(f,d));else{h=d.v!==k;var p=l(()=>Pe(a));F(d,p)}var y=Reflect.getOwnPropertyDescriptor(o,f);if(y?.set&&y.set.call(c,a),!h){if(r&&typeof f=="string"){var b=n.get("length"),g=Number(f);Number.isInteger(g)&&g>=b.v&&F(b,g+1)}tt(s)}return!0},ownKeys(o){_(s);var f=Reflect.ownKeys(o).filter(d=>{var h=n.get(d);return h===void 0||h.v!==k});for(var[a,c]of n)c.v!==k&&!(a in o)&&f.push(a);return f},setPrototypeOf(){Ar()}})}var mn,wn,En,xn;function Vr(){if(mn===void 0){mn=window,wn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;En=Te(t,"firstChild").get,xn=Te(t,"nextSibling").get,Xt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xt(n)&&(n.__t=void 0)}}function Re(e=""){return document.createTextNode(e)}function qe(e){return En.call(e)}function nt(e){return xn.call(e)}function $t(e,t){return qe(e)}function De(e,t=!1){{var n=qe(e);return n instanceof Comment&&n.data===""?nt(n):n}}function ce(e,t=1,n=!1){let r=e;for(;t--;)r=nt(r);return r}function Wr(e){e.textContent=""}function Sn(){return!1}function Ft(e){var t=m,n=w;H(null),Z(null);try{return e()}finally{H(t),Z(n)}}function Tn(e){w===null&&(m===null&&Tr(),Sr()),de&&xr()}function Yr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function se(e,t,n){var r=w;r!==null&&(r.f&D)!==0&&(e|=D);var s={ctx:T,deps:null,nodes:null,f:e|I|j,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{je(s),s.f|=Et}catch(o){throw P(s),o}else t!==null&&ne(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Oe)===0&&(i=i.first,(e&X)!==0&&(e&Ce)!==0&&i!==null&&(i.f|=Ce)),i!==null&&(i.parent=r,r!==null&&Yr(i,r),m!==null&&(m.f&N)!==0&&(e&pe)===0)){var l=m;(l.effects??=[]).push(i)}return s}function It(){return m!==null&&!K}function Pt(e){const t=se(Ze,null,!1);return M(t,C),t.teardown=e,t}function Mn(e){Tn();var t=w.f,n=!m&&(t&G)!==0&&(t&Et)===0;if(n){var r=T;(r.e??=[]).push(e)}else return Cn(e)}function Cn(e){return se(mt|sn,e,!1)}function Kr(e){return Tn(),se(Ze|sn,e,!0)}function Jr(e){fe.ensure();const t=se(pe|Oe,e,!0);return(n={})=>new Promise(r=>{n.outro?we(t,()=>{P(t),r(void 0)}):(P(t),r(void 0))})}function me(e,t){var n=T,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=qt(()=>{e(),!r.ran&&(r.ran=!0,A(t))})}function Rt(){var e=T;qt(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&C)!==0&&n.deps!==null&&M(n,J),Le(n)&&je(n),t.ran=!1}})}function Zr(e){return se(St|Oe,e,!0)}function qt(e,t=0){return se(Ze|t,e,!0)}function Dt(e,t=[],n=[],r=[]){Br(r,t,n,s=>{se(Ze,()=>e(...s.map(_)),!0)})}function Lt(e,t=0){var n=se(X|t,e,!0);return n}function B(e){return se(G|Oe,e,!0)}function On(e){var t=e.teardown;if(t!==null){const n=de,r=m;In(!0),H(null);try{t.call(null)}finally{In(n),H(r)}}}function An(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Ft(()=>{s.abort(ke)});var r=n.next;(n.f&pe)!==0?n.parent=null:P(n,t),n=r}}function Qr(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&G)===0&&P(t),t=n}}function P(e,t=!0){var n=!1;(t||(e.f&rn)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Xr(e.nodes.start,e.nodes.end),n=!0),An(e,t&&!n),at(e,0),M(e,ee);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();On(e);var s=e.parent;s!==null&&s.first!==null&&kn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Xr(e,t){for(;e!==null;){var n=e===t?null:nt(e);e.remove(),e=n}}function kn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function we(e,t,n=!0){var r=[];Nn(e,r,!0);var s=()=>{n&&P(e),t&&t()},i=r.length;if(i>0){var l=()=>--i||s();for(var o of r)o.out(l)}else s()}function Nn(e,t,n){if((e.f&D)===0){e.f^=D;var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)(o.is_global||n)&&t.push(o);for(var s=e.first;s!==null;){var i=s.next,l=(s.f&Ce)!==0||(s.f&G)!==0&&(e.f&X)!==0;Nn(s,t,l?n:!1),s=i}}}function jt(e){$n(e,!0)}function $n(e,t){if((e.f&D)!==0){e.f^=D,(e.f&C)===0&&(M(e,I),ne(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Ce)!==0||(n.f&G)!==0;$n(n,s?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function Fn(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:nt(n);t.append(n),n=s}}let ft=!1,de=!1;function In(e){de=e}let m=null,K=!1;function H(e){m=e}let w=null;function Z(e){w=e}let U=null;function es(e){m!==null&&(U===null?U=[e]:U.push(e))}let R=null,L=0,z=null;function ts(e){z=e}let Pn=1,Ee=0,xe=Ee;function Rn(e){xe=e}function qn(){return++Pn}function Le(e){var t=e.f;if((t&I)!==0)return!0;if(t&N&&(e.f&=~ge),(t&J)!==0){for(var n=e.deps,r=n.length,s=0;s<r;s++){var i=n[s];if(Le(i)&&gn(i),i.wv>e.wv)return!0}(t&j)!==0&&V===null&&M(e,C)}return!1}function Dn(e,t,n=!0){var r=e.reactions;if(r!==null&&!(U!==null&&Se.call(U,e)))for(var s=0;s<r.length;s++){var i=r[s];(i.f&N)!==0?Dn(i,t,!1):t===i&&(n?M(i,I):(i.f&C)!==0&&M(i,J),ne(i))}}function Ln(e){var t=R,n=L,r=z,s=m,i=U,l=T,o=K,f=xe,a=e.f;R=null,L=0,z=null,m=(a&(G|pe))===0?e:null,U=null,Ne(e.ctx),K=!1,xe=++Ee,e.ac!==null&&(Ft(()=>{e.ac.abort(ke)}),e.ac=null);try{e.f|=xt;var c=e.fn,d=c(),h=e.deps,v=x?.is_fork;if(R!==null){var u;if(v||at(e,L),h!==null&&L>0)for(h.length=L+R.length,u=0;u<R.length;u++)h[L+u]=R[u];else e.deps=h=R;if(It()&&(e.f&j)!==0)for(u=L;u<h.length;u++)(h[u].reactions??=[]).push(e)}else!v&&h!==null&&L<h.length&&(at(e,L),h.length=L);if(et()&&z!==null&&!K&&h!==null&&(e.f&(N|J|I))===0)for(u=0;u<z.length;u++)Dn(z[u],e);if(s!==null&&s!==e){if(Ee++,s.deps!==null)for(let p=0;p<n;p+=1)s.deps[p].rv=Ee;if(t!==null)for(const p of t)p.rv=Ee;z!==null&&(r===null?r=z:r.push(...z))}return(e.f&le)!==0&&(e.f^=le),d}catch(p){return an(p)}finally{e.f^=xt,R=t,L=n,z=r,m=s,U=i,Ne(l),K=o,xe=f}}function ns(e,t){let n=t.reactions;if(n!==null){var r=pr.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(t.f&N)!==0&&(R===null||!Se.call(R,t))){var i=t;(i.f&j)!==0&&(i.f^=j,i.f&=~ge),Tt(i),pn(i),at(i,0)}}function at(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ns(e,n[r])}function je(e){var t=e.f;if((t&ee)===0){M(e,C);var n=w,r=ft;w=e,ft=!0;try{(t&(X|tn))!==0?Qr(e):An(e),On(e);var s=Ln(e);e.teardown=typeof s=="function"?s:null,e.wv=Pn;var i;gt&&ir&&(e.f&I)!==0&&e.deps}finally{ft=r,w=n}}}function _(e){var t=e.f,n=(t&N)!==0;if(m!==null&&!K){var r=w!==null&&(w.f&ee)!==0;if(!r&&(U===null||!Se.call(U,e))){var s=m.deps;if((m.f&xt)!==0)e.rv<Ee&&(e.rv=Ee,R===null&&s!==null&&s[L]===e?L++:R===null?R=[e]:R.push(e));else{(m.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[m]:Se.call(i,m)||i.push(m)}}}if(de&&ae.has(e))return ae.get(e);if(n){var l=e;if(de){var o=l.v;return((l.f&C)===0&&l.reactions!==null||Bn(l))&&(o=kt(l)),ae.set(l,o),o}var f=(l.f&j)===0&&!K&&m!==null&&(ft||(m.f&j)!==0),a=l.deps===null;Le(l)&&(f&&(l.f|=j),gn(l)),f&&!a&&jn(l)}if(V?.has(e))return V.get(e);if((e.f&le)!==0)throw e.v;return e.v}function jn(e){if(e.deps!==null){e.f|=j;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&N)!==0&&(t.f&j)===0&&jn(t)}}function Bn(e){if(e.v===k)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ae.has(t)||(t.f&N)!==0&&Bn(t))return!0;return!1}function A(e){var t=K;try{return K=!0,e()}finally{K=t}}function Q(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ae in e)Bt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ae in n&&Bt(n)}}}function Bt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Bt(e[r],t)}catch{}const n=yt(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Qt(n);for(let s in r){const i=r[s].get;if(i)try{i.call(e)}catch{}}}}}const rs=new Set,Hn=new Set;function ss(e,t,n,r={}){function s(i){if(r.capture||rt.call(t,i),!i.cancelBubble)return Ft(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ye(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function is(e,t,n,r,s){var i={capture:r,passive:s},l=ss(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Pt(()=>{t.removeEventListener(e,l,i)})}let Un=null;function rt(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;Un=e;var l=0,o=Un===e&&e.__root;if(o){var f=s.indexOf(o);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var a=s.indexOf(t);if(a===-1)return;f<=a&&(l=f)}if(i=s[l]||e.target,i!==t){Zt(e,"currentTarget",{configurable:!0,get(){return i||n}});var c=m,d=w;H(null),Z(null);try{for(var h,v=[];i!==null;){var u=i.assignedSlot||i.parentNode||i.host||null;try{var p=i["__"+r];p!=null&&(!i.disabled||e.target===i)&&p.call(i,e)}catch(y){h?v.push(y):h=y}if(e.cancelBubble||u===t||u===null)break;i=u}if(h){for(let y of v)queueMicrotask(()=>{throw y});throw h}}finally{e.__root=t,delete e.currentTarget,H(c),Z(d)}}}function zn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ht(e,t){var n=w;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function he(e,t){var n=(t&hr)!==0,r=(t&vr)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=zn(i?e:"<!>"+e),n||(s=qe(s)));var l=r||wn?document.importNode(s,!0):s.cloneNode(!0);if(n){var o=qe(l),f=l.lastChild;Ht(o,f)}else Ht(l,l);return l}}function os(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,i;return()=>{if(!i){var l=zn(s),o=qe(l);i=qe(o)}var f=i.cloneNode(!0);return Ht(f,f),f}}function ls(e,t){return os(e,t,"svg")}function ie(e,t){e!==null&&e.before(t)}const fs=["touchstart","touchmove"];function as(e){return fs.includes(e)}function Gn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Vn(e,t){return us(e,t)}const Be=new Map;function us(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:l=!0}){Vr();var o=new Set,f=d=>{for(var h=0;h<d.length;h++){var v=d[h];if(!o.has(v)){o.add(v);var u=as(v);t.addEventListener(v,rt,{passive:u});var p=Be.get(v);p===void 0?(document.addEventListener(v,rt,{passive:u}),Be.set(v,1)):Be.set(v,p+1)}}};f(ot(rs)),Hn.add(f);var a=void 0,c=Jr(()=>{var d=n??t.appendChild(Re());return Lr(d,{pending:()=>{}},h=>{if(i){Qe({});var v=T;v.c=i}s&&(r.$$events=s),a=e(h,r)||{},i&&Xe()}),()=>{for(var h of o){t.removeEventListener(h,rt);var v=Be.get(h);--v===0?(document.removeEventListener(h,rt),Be.delete(h)):Be.set(h,v)}Hn.delete(f),d!==n&&d.parentNode?.removeChild(d)}});return cs.set(a,c),a}let cs=new WeakMap;class ds{anchor;#t=new Map;#o=new Map;#e=new Map;#s=new Set;#i=!0;constructor(t,n=!0){this.anchor=t,this.#i=n}#r=()=>{var t=x;if(this.#t.has(t)){var n=this.#t.get(t),r=this.#o.get(n);if(r)jt(r),this.#s.delete(n);else{var s=this.#e.get(n);s&&(this.#o.set(n,s.effect),this.#e.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,l]of this.#t){if(this.#t.delete(i),i===t)break;const o=this.#e.get(l);o&&(P(o.effect),this.#e.delete(l))}for(const[i,l]of this.#o){if(i===n||this.#s.has(i))continue;const o=()=>{if(Array.from(this.#t.values()).includes(i)){var a=document.createDocumentFragment();Fn(l,a),a.append(Re()),this.#e.set(i,{effect:l,fragment:a})}else P(l);this.#s.delete(i),this.#o.delete(i)};this.#i||!r?(this.#s.add(i),we(l,o,!1)):o()}}};#n=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[r,s]of this.#e)n.includes(r)||(P(s.effect),this.#e.delete(r))};ensure(t,n){var r=x,s=Sn();if(n&&!this.#o.has(t)&&!this.#e.has(t))if(s){var i=document.createDocumentFragment(),l=Re();i.append(l),this.#e.set(t,{effect:B(()=>n(l)),fragment:i})}else this.#o.set(t,B(()=>n(this.anchor)));if(this.#t.set(r,t),s){for(const[o,f]of this.#o)o===t?r.skipped_effects.delete(f):r.skipped_effects.add(f);for(const[o,f]of this.#e)o===t?r.skipped_effects.delete(f.effect):r.skipped_effects.add(f.effect);r.oncommit(this.#r),r.ondiscard(this.#n)}else this.#r()}}function ut(e,t,n=!1){var r=new ds(e),s=n?Ce:0;function i(l,o){r.ensure(l,o)}Lt(()=>{var l=!1;t((o,f=!0)=>{l=!0,i(f,o)}),l||i(!1,null)},s)}function ct(e,t){return t}function hs(e,t,n){for(var r=[],s=t.length,i,l=t.length,o=0;o<s;o++){let d=t[o];we(d,()=>{if(i){if(i.pending.delete(d),i.done.add(d),i.pending.size===0){var h=e.outrogroups;Ut(ot(i.done)),h.delete(i),h.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var f=r.length===0&&n!==null;if(f){var a=n,c=a.parentNode;Wr(c),c.append(a),e.items.clear()}Ut(t,!f)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Ut(e,t=!0){for(var n=0;n<e.length;n++)P(e[n],t)}var Wn;function dt(e,t,n,r,s,i=null){var l=e,o=new Map,f=null,a=Y(()=>{var p=n();return Jt(p)?p:p==null?[]:ot(p)}),c,d=!0;function h(){u.fallback=f,vs(u,c,l,t,r),f!==null&&(c.length===0?(f.f&oe)===0?jt(f):(f.f^=oe,it(f,null,l)):we(f,()=>{f=null}))}var v=Lt(()=>{c=_(a);for(var p=c.length,y=new Set,b=x,g=Sn(),E=0;E<p;E+=1){var q=c[E],S=r(q,E),O=d?null:o.get(S);O?(O.v&&Ie(O.v,q),O.i&&Ie(O.i,E),g&&b.skipped_effects.delete(O.e)):(O=_s(o,d?l:Wn??=Re(),q,S,E,s,t,n),d||(O.e.f|=oe),o.set(S,O)),y.add(S)}if(p===0&&i&&!f&&(d?f=B(()=>i(l)):(f=B(()=>i(Wn??=Re())),f.f|=oe)),!d)if(g){for(const[_e,$]of o)y.has(_e)||b.skipped_effects.add($.e);b.oncommit(h),b.ondiscard(()=>{})}else h();_(a)}),u={effect:v,items:o,outrogroups:null,fallback:f};d=!1}function st(e){for(;e!==null&&(e.f&G)===0;)e=e.next;return e}function vs(e,t,n,r,s){var i=t.length,l=e.items,o=st(e.effect.first),f,a=null,c=[],d=[],h,v,u,p;for(p=0;p<i;p+=1){if(h=t[p],v=s(h,p),u=l.get(v).e,e.outrogroups!==null)for(const $ of e.outrogroups)$.pending.delete(u),$.done.delete(u);if((u.f&oe)!==0)if(u.f^=oe,u===o)it(u,null,n);else{var y=a?a.next:o;u===e.effect.last&&(e.effect.last=u.prev),u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),ve(e,a,u),ve(e,u,y),it(u,y,n),a=u,c=[],d=[],o=st(a.next);continue}if((u.f&D)!==0&&jt(u),u!==o){if(f!==void 0&&f.has(u)){if(c.length<d.length){var b=d[0],g;a=b.prev;var E=c[0],q=c[c.length-1];for(g=0;g<c.length;g+=1)it(c[g],b,n);for(g=0;g<d.length;g+=1)f.delete(d[g]);ve(e,E.prev,q.next),ve(e,a,E),ve(e,q,b),o=b,a=q,p-=1,c=[],d=[]}else f.delete(u),it(u,o,n),ve(e,u.prev,u.next),ve(e,u,a===null?e.effect.first:a.next),ve(e,a,u),a=u;continue}for(c=[],d=[];o!==null&&o!==u;)(f??=new Set).add(o),d.push(o),o=st(o.next);if(o===null)continue}(u.f&oe)===0&&c.push(u),a=u,o=st(u.next)}if(e.outrogroups!==null){for(const $ of e.outrogroups)$.pending.size===0&&(Ut(ot($.done)),e.outrogroups?.delete($));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||f!==void 0){var S=[];if(f!==void 0)for(u of f)(u.f&D)===0&&S.push(u);for(;o!==null;)(o.f&D)===0&&o!==e.fallback&&S.push(o),o=st(o.next);var O=S.length;if(O>0){var _e=null;hs(e,S,_e)}}}function _s(e,t,n,r,s,i,l,o){var f=(l&lr)!==0?(l&ar)===0?re(n,!1,!1):be(n):null,a=(l&fr)!==0?be(s):null;return{v:f,i:a,e:B(()=>(i(t,f??n,a??s,o),()=>{e.delete(r)}))}}function it(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,i=t&&(t.f&oe)===0?t.nodes.start:n;r!==null;){var l=nt(r);if(i.before(r),r===s)return;r=l}}function ve(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Yn(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Yn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ps(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Yn(e))&&(r&&(r+=" "),r+=t);return r}function gs(e){return typeof e=="object"?ps(e):e??""}function ys(e,t,n){var r=e==null?"":""+e;return r=r?r+" "+t:t,r===""?null:r}function bs(e,t){return e==null?null:String(e)}function ms(e,t,n,r,s,i){var l=e.__className;if(l!==n||l===void 0){var o=ys(n,r);o==null?e.removeAttribute("class"):e.className=o,e.__className=n}return i}function Kn(e,t,n,r){var s=e.__style;if(s!==t){var i=bs(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const ws=Symbol("is custom element"),Es=Symbol("is html");function zt(e,t,n,r){var s=xs(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[wr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ss(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function xs(e){return e.__attributes??={[ws]:e.nodeName.includes("-"),[Es]:e.namespaceURI===_r}}var Jn=new Map;function Ss(e){var t=e.getAttribute("is")||e.nodeName,n=Jn.get(t);if(n)return n;Jn.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=Qt(s);for(var l in r)r[l].set&&n.push(l);s=yt(s)}return n}function Gt(e=!1){const t=T,n=t.l.u;if(!n)return;let r=()=>Q(t.s);if(e){let s=0,i={};const l=At(()=>{let o=!1;const f=t.s;for(const a in f)f[a]!==i[a]&&(i[a]=f[a],o=!0);return o&&s++,s});r=()=>_(l)}n.b.length&&Kr(()=>{Zn(t,r),bt(n.b)}),Mn(()=>{const s=A(()=>n.m.map(br));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&Mn(()=>{Zn(t,r),bt(n.a)})}function Zn(e,t){if(e.l.s)for(const n of e.l.s)_(n);t()}function Qn(e,t,n){if(e==null)return t(void 0),Me;const r=A(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const He=[];function ht(e,t=Me){let n=null;const r=new Set;function s(o){if(ln(e,o)&&(e=o,n)){const f=!He.length;for(const a of r)a[1](),He.push(a,e);if(f){for(let a=0;a<He.length;a+=2)He[a][0](He[a+1]);He.length=0}}}function i(o){s(o(e))}function l(o,f=Me){const a=[o,f];return r.add(a),r.size===1&&(n=t(s,i)||Me),o(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:l}}function Ts(e){let t;return Qn(e,n=>t=n)(),t}let vt=!1,Vt=Symbol();function Ue(e,t,n){const r=n[t]??={store:null,source:re(void 0),unsubscribe:Me};if(r.store!==e&&!(Vt in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Me;else{var s=!0;r.unsubscribe=Qn(e,i=>{s?r.source.v=i:F(r.source,i)}),s=!1}return e&&Vt in n?Ts(e):_(r.source)}function Wt(){const e={};function t(){Pt(()=>{for(var n in e)e[n].unsubscribe();Zt(e,Vt,{enumerable:!1,value:!0})})}return[e,t]}function Ms(e){var t=vt;try{return vt=!1,[e(),vt]}finally{vt=t}}function ze(e,t,n,r){var s=!Je||(n&ur)!==0,i=(n&dr)!==0,l=r,o=!0,f=()=>(o&&(o=!1,l=r),l),a;{var c=Ae in e||mr in e;a=Te(e,t)?.set??(c&&t in e?g=>e[t]=g:void 0)}var d,h=!1;[d,h]=Ms(()=>e[t]),d===void 0&&r!==void 0&&(d=f(),a&&(s&&Cr(),a(d)));var v;if(s?v=()=>{var g=e[t];return g===void 0?f():(o=!0,g)}:v=()=>{var g=e[t];return g!==void 0&&(l=void 0),g===void 0?l:g},s&&(n&cr)===0)return v;if(a){var u=e.$$legacy;return(function(g,E){return arguments.length>0?((!s||!E||u||h)&&a(E?v():g),g):v()})}var p=!1,y=Y(()=>(p=!1,v()));_(y);var b=w;return(function(g,E){if(arguments.length>0){const q=E?_(y):s&&i?Pe(g):g;return F(y,q),p=!0,l!==void 0&&(l=q),g}return de&&p||(b.f&ee)!==0?y.v:_(y)})}var Cs=ls('<circle opacity="1" r="0.4" stroke-width="0.1" fill="none"></circle>');function _t(e,t){let n=ze(t,"color",8),r=ze(t,"x",8,0),s=ze(t,"y",8,0);var i=Cs();Dt(()=>{zt(i,"cx",r()),zt(i,"cy",s()),zt(i,"stroke",n())}),ie(e,i)}const Xn=ht(""),Ge=ht([]),Ve=ht([]),er=ht("");function We(e){switch(e){case 0:return"rgba(0,255,0,1)";case 1:return"rgba(212,245,66,1)";default:return"rgba(212,245,66,0.5)"}}function Ye(e){switch(e){case 0:return"rgba(255,0,0,1)";case 1:return"rgba(245,105,66,1)";default:return"rgba(245,105,66,0.5)"}}function tr(e,t){return e.x===t.x&&e.y===t.y}function Ke(e,t){return!t.some(n=>tr(e,n.from)||tr(e,n.to))}var Os=he("<!> <!>",1),As=he("<!> <!>",1),ks=he("<!> <!>",1);function Ns(e,t){Qe(t,!1);const n=()=>Ue(Ge,"$suggestedFriendlyMoves",s),r=()=>Ue(Ve,"$suggestedEnemyMoves",s),[s,i]=Wt(),l=re(),o=re();function f(v,u,p=!1){const y=parseInt(v.toString());let b;return u?b=p?3.5-y+1:-3.5+y-1:b=p?-3.5+y-1:3.5-y+1,b.toString()}function a(v){const u=document.querySelector("coords.files").classList.contains("black");return{from:{x:f(v.from.x,u,!0),y:f(v.from.y,u)},to:{x:f(v.to.x,u,!0),y:f(v.to.y,u)}}}me(()=>n(),()=>{F(l,n().map(v=>a(v)))}),me(()=>r(),()=>{F(o,r().map(v=>a(v)))}),Rt(),Gt();var c=ks(),d=De(c);dt(d,1,()=>_(l),ct,(v,u,p)=>{var y=Os(),b=De(y);{let E=Y(()=>(Q(We),A(()=>We(p))));_t(b,{get color(){return _(E)},get x(){return _(u),A(()=>_(u).from.x)},get y(){return _(u),A(()=>_(u).from.y)}})}var g=ce(b,2);{let E=Y(()=>(Q(We),A(()=>We(p))));_t(g,{get color(){return _(E)},get x(){return _(u),A(()=>_(u).to.x)},get y(){return _(u),A(()=>_(u).to.y)}})}ie(v,y)});var h=ce(d,2);dt(h,1,()=>_(o),ct,(v,u,p)=>{var y=As(),b=De(y);{var g=S=>{{let O=Y(()=>(Q(Ye),A(()=>Ye(p))));_t(S,{get color(){return _(O)},get x(){return _(u),A(()=>_(u).from.x)},get y(){return _(u),A(()=>_(u).from.y)}})}};ut(b,S=>{Q(Ke),_(u),_(l),A(()=>Ke(_(u).from,_(l)))&&S(g)})}var E=ce(b,2);{var q=S=>{{let O=Y(()=>(Q(Ye),A(()=>Ye(p))));_t(S,{get color(){return _(O)},get x(){return _(u),A(()=>_(u).to.x)},get y(){return _(u),A(()=>_(u).to.y)}})}};ut(E,S=>{Q(Ke),_(u),_(o),A(()=>Ke(_(u).to,_(o)))&&S(q)})}ie(v,y)}),ie(e,c),Xe(),i()}async function $s(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function Fs(e){let t,n,r,s=!1;return function(l){t===void 0?(t=l,n=0,r=-1):t=Ps(t,l);const o=t.length;let f=0;for(;n<o;){s&&(t[n]===10&&(f=++n),s=!1);let a=-1;for(;n<o&&a===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-f);break;case 13:s=!0;case 10:a=n;break}if(a===-1)break;e(t.subarray(f,a),r),f=n,r=-1}f===o?t=void 0:f!==0&&(t=t.subarray(f),n-=f)}}function Is(e,t,n){let r=nr();const s=new TextDecoder;return function(l,o){if(l.length===0)n?.(r),r=nr();else if(o>0){const f=s.decode(l.subarray(0,o)),a=o+(l[o+1]===32?2:1),c=s.decode(l.subarray(a));switch(f){case"data":r.data=r.data?r.data+`
`+c:c;break;case"event":r.event=c;break;case"id":e(r.id=c);break;case"retry":const d=parseInt(c,10);isNaN(d)||t(r.retry=d);break}}}}function Ps(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function nr(){return{data:"",event:"",id:"",retry:void 0}}var Rs=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Yt="text/event-stream",qs=1e3,rr="last-event-id";function Ds(e,t){var{signal:n,headers:r,onopen:s,onmessage:i,onclose:l,onerror:o,openWhenHidden:f,fetch:a}=t,c=Rs(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,h)=>{const v=Object.assign({},r);v.accept||(v.accept=Yt);let u;function p(){u.abort(),document.hidden||S()}f||document.addEventListener("visibilitychange",p);let y=qs,b=0;function g(){document.removeEventListener("visibilitychange",p),window.clearTimeout(b),u.abort()}n?.addEventListener("abort",()=>{g(),d()});const E=a??window.fetch,q=s??Ls;async function S(){var O;u=new AbortController;try{const _e=await E(e,Object.assign(Object.assign({},c),{headers:v,signal:u.signal}));await q(_e),await $s(_e.body,Fs(Is($=>{$?v[rr]=$:delete v[rr]},$=>{y=$},i))),l?.(),g(),d()}catch(_e){if(!u.signal.aborted)try{const $=(O=o?.(_e))!==null&&O!==void 0?O:y;window.clearTimeout(b),b=window.setTimeout(S,$)}catch($){g(),h($)}}}S()})}function Ls(e){const t=e.headers.get("content-type");if(!t?.startsWith(Yt))throw new Error(`Expected content-type to be ${Yt}, Actual: ${t}`)}class js{abortController;abort(){this.abortController!==void 0&&!this.abortController.signal.aborted&&(this.abortController.abort(),this.abortController=void 0)}async getEvaluation(t,n,r){this.abortController=new AbortController;const s=this.abortController.signal,i=this.abort;return new Promise((l,o)=>{Ds("http://localhost:8080/moves/sse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({moves:t}),signal:s,async onmessage(f){try{const a={...JSON.parse(f.data),refMoveCounter:n};await r(a)}catch(a){i(),o(a)}},onerror(f){o(f)},openWhenHidden:!0}).then(l).catch(o)})}}var Bs=he('<div class="svelte-2clz6s"><button class="svelte-2clz6s">Refresh</button> <span class="svelte-2clz6s"> </span> <span class="svelte-2clz6s"> </span></div>');function Hs(e,t){Qe(t,!1);const n=()=>Ue(Xn,"$score",s),r=()=>Ue(er,"$stockfishResponse",s),[s,i]=Wt(),l=re(),o=re(),f=re();function a(g){return g==="GG"?"green":"black"}function c(g,E){return E=="GG"?E:g}function d(){Kt.resync()}me(()=>n(),()=>{F(l,{"border-color":a(n())})}),me(()=>_(l),()=>{F(o,Object.keys(_(l)).map(g=>`--${g}:${_(l)[g]}`).join(";"))}),me(()=>(r(),n()),()=>{F(f,c(r(),n()))}),Rt(),Gt();var h=Bs(),v=$t(h),u=ce(v,2),p=$t(u),y=ce(u,2),b=$t(y);Dt(()=>{Kn(h,_(o)),Gn(p,n()),Gn(b,_(f))}),is("click",v,d),ie(e,h),Xe(),i()}const Us=(e,t)=>e.from.x!==t.from.x||e.from.y!==t.from.y||e.to.x!==t.to.x||e.to.y!==t.to.y,zs=(e,t)=>e.from.x===t.from.x&&e.from.y===t.from.y&&e.to.x===t.to.x&&e.to.y===t.to.y;class sr{_stockfish=new js;moveCounter=0;moveObserver;friendlyMoves;enemyMoves;constructor(){Ge.subscribe(t=>this.friendlyMoves=t),Ve.subscribe(t=>this.enemyMoves=t)}mount(){if(!this.highlightsTarget){const t="Highlights target is missing";throw console.error(t),new Error(t)}if(!this.statusTarget){const t="Status target is missing";throw console.error(t),new Error(t)}Vn(this.Highlights,{target:this.highlightsTarget}),Vn(Hs,{target:this.statusTarget}),this.onMoveObserved(),this.startObservingMoves()}resync(){this.moveCounter=0,this.moveObserver&&(this.moveObserver.disconnect(),this.moveObserver=void 0),this.onMoveObserved(),this.startObservingMoves()}async onMoveObserved(){++this.moveCounter,Ge.set([]),Ve.set([]),this._stockfish.abort(),await this.handleTurn(this.moveCounter%2!==0)}startObservingMoves(){this.moveObserver=new MutationObserver(()=>{this.onMoveObserved()}),this.moveObserver.observe(this.movesContainer,{childList:!0,subtree:!0})}addTopMove(t,n,r){t.set([n,...r.filter(Gs(n)).slice(0,1)])}async handleTurn(t){try{await this._stockfish.getEvaluation(this.scrapeMoves(),this.moveCounter,n=>{const r=this.moveCounter!==n.refMoveCounter;if(r)throw{stale:r};if(er.set(n.raw),n.bestmove){const s=t?n.bestmove.bestmove:n.bestmove.ponder,i=t?n.bestmove.ponder:n.bestmove.bestmove;s&&this.addTopMove(Ge,s,this.friendlyMoves),i&&this.addTopMove(Ve,i,this.enemyMoves)}if(n.evaluation){const s=t?n.evaluation.friendly:n.evaluation.enemy,i=t?n.evaluation.enemy:n.evaluation.friendly;s&&this.addTopMove(Ge,s,this.friendlyMoves),i&&this.addTopMove(Ve,i,this.enemyMoves)}n.score&&Xn.set(n.score)})}catch(n){if(!n.stale&&!n.aborted)throw n}}}function Gs(e){return(t,n,r)=>{const s=Us(t,e),l=r.findIndex(o=>zs(t,o))===n;return s&&l}}function Vs(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("class","cg-shapes"),e.setAttribute("viewBox","-4 -4 8 8"),e.setAttribute("preserveAspectRatio","xMidYMid slice"),e}class Ws extends sr{Highlights=Ns;get highlightsTarget(){const t=document.querySelector("cg-container");if(!t)throw new Error("Highlights target not found");const n=Vs();return t.appendChild(n),n}get movesContainer(){const t=document.querySelector("rm6");if(!t)throw new Error("Moves container not found");return t}get statusTarget(){const t=document.querySelector(".round__app.variant-standard");if(!t)throw new Error("Status target not found");return t}isGame(){const t=document.querySelector(".message > div:nth-child(1)"),n=t&&t.textContent?.includes("It's your turn!")||!1;return!!document.querySelector("l4x")||n}scrapeMoves(){const t=[];for(const n of document.querySelectorAll("l4x kwdb"))n.textContent&&t.push(n.textContent);return t}}var Ys=he("<div></div>");function pt(e,t){Qe(t,!1);const n=re(),r=re();let s=ze(t,"color",8),i=ze(t,"x",8),l=ze(t,"y",8);me(()=>Q(s()),()=>{F(n,`--highlight-color:${s()};`)}),me(()=>(Q(i()),Q(l())),()=>{F(r,`highlight square-${i()}${l()}`)}),Rt();var o=Ys();Dt(()=>{ms(o,1,gs(_(r)),"svelte-57cylo"),Kn(o,_(n))}),ie(e,o),Xe()}var Ks=he("<!> <!>",1),Js=he("<!> <!>",1),Zs=he("<!> <!>",1);function Qs(e,t){Qe(t,!1);const n=()=>Ue(Ge,"$suggestedFriendlyMoves",s),r=()=>Ue(Ve,"$suggestedEnemyMoves",s),[s,i]=Wt();Gt();var l=Zs(),o=De(l);dt(o,1,n,ct,(a,c,d)=>{var h=Ks(),v=De(h);{let p=Y(()=>We(d));pt(v,{get color(){return _(p)},get x(){return _(c).from.x},get y(){return _(c).from.y}})}var u=ce(v,2);{let p=Y(()=>We(d));pt(u,{get color(){return _(p)},get x(){return _(c).to.x},get y(){return _(c).to.y}})}ie(a,h)});var f=ce(o,2);dt(f,1,r,ct,(a,c,d)=>{var h=Js(),v=De(h);{var u=b=>{{let g=Y(()=>Ye(d));pt(b,{get color(){return _(g)},get x(){return _(c).from.x},get y(){return _(c).from.y}})}};ut(v,b=>{Ke(_(c).from,n())&&b(u)})}var p=ce(v,2);{var y=b=>{{let g=Y(()=>Ye(d));pt(b,{get color(){return _(g)},get x(){return _(c).to.x},get y(){return _(c).to.y}})}};ut(p,b=>{Ke(_(c).to,n())&&b(y)})}ie(a,h)}),ie(e,l),Xe(),i()}class Xs extends sr{Highlights=Qs;queryForElement(t,n){let r;for(const s of t)if(r=document.querySelector(s),r)break;if(!r)throw new Error(`${n} target not found`);return r}get highlightsTarget(){return this.queryForElement(["chess-board","wc-chess-board"],"highlights target")}get movesContainer(){return this.queryForElement(["vertical-move-list","wc-simple-move-list"],"moves container")}get statusTarget(){const t=this.queryForElement([".play-controller-message",".play-controller-messages"],"status target"),n=document.createElement("div");return n.style.width="100000vh",n.style.height="25rem",t.insertBefore(n,t.firstChild),n}isGame(){return!!this.movesContainer}scrapeMoves(){return this.movesContainer.querySelectorAll(".node").values().map(t=>t.textContent.trim()).toArray()}}const Kt=window.location.host==="lichess.org"?new Ws:new Xs,ei=setInterval(()=>{Kt.isGame()&&(clearInterval(ei),Kt.mount())},1e3)})();
